<!DOCTYPE html>
<html>
<head>
    <title>Lincoln Chatbot</title>
    <style>
        body {
            margin: 0;
            padding: 0;
            font-family: Arial, sans-serif;

            /* Background image */
            background-image: url("bg.png");
            background-size: cover;
            background-position: center;
            background-repeat: no-repeat;
            background-attachment: fixed;

            height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            cursor: default;
        }

        /* Invisible button styling */
        #invisible-btn {
            position: absolute;
            transform: translate(5px, 132px); /* Adjust position as needed */
            width: 50px; /* Width of clickable area */
            height: 50px; /* Height of clickable area */
            background-color: transparent; /* Invisible */
            border: none;
            cursor: default; /* Normal arrow cursor */
        }
    </style>
</head>
<body>

    <!-- Invisible button -->
    <button id="invisible-btn"></button>

    <!-- Chatbase Script -->
    <script>
    (function(){
        if(!window.chatbase || window.chatbase("getState") !== "initialized"){
            window.chatbase = (...args) => {
                if(!window.chatbase.q) window.chatbase.q = [];
                window.chatbase.q.push(args);
            };
            window.chatbase = new Proxy(window.chatbase, {
                get(target, prop){
                    if(prop === "q") return target.q;
                    return (...args) => target(prop, ...args);
                }
            });
        }

        const onLoad = function(){
            const script = document.createElement("script");
            script.src = "https://www.chatbase.co/embed.min.js";
            script.id = "4_7zqplmOYUuVm5yQH5Bx";
            script.domain = "www.chatbase.co";
            document.body.appendChild(script);
        };

        if(document.readyState === "complete"){
            onLoad();
        } else {
            window.addEventListener("load", onLoad);
        }
    })();
    </script>

    <!-- Lincoln Bot TTS Intro -->
    <script>
    const introChunks = [
      "Hello everyone, and welcome to today’s Townhall!",
      "I’m Lincoln Bot AI, your digital co-host for the session — proudly built by Periyanayaki and Sandhiya from the myXP team at LFG.",
      "I’ll be here supporting our amazing hosts, keeping the flow smooth, the energy high, and stepping in whenever a little AI magic can help.",
      "I’ve been trained on more than 100,000 hours of stand-up comedy and 20 years of internal meeting transcripts.",
      "So if I suddenly drop a joke about Q3 projections, just laugh with me — it means I’m trying my best to fit in.",
      "Before we dive in, here’s what you can expect from today:",
      "A smooth, engaging flow of updates.",
      "Moments that spark insight and conversation.",
      "And yes… just a little bit of fun along the way.",
      "I’m here with you throughout the session, cheering you on, keeping us on track, and adding a touch of personality whenever the moment calls for it.",
      "Let’s make today’s Townhall smooth, insightful, and just a little bit fun."
    ];

    const emphasizePhrases = [
      "Periyanayaki",
      "Sandhiya",
      "myXP team at LFG",
      "amazing hosts",
      "energy high",
      "100,000 hours of stand-up comedy",
      "smooth, insightful, and just a little bit fun"
    ];

    let hasPlayed = false;

    async function getVoices() {
      return new Promise(resolve => {
        let voices = speechSynthesis.getVoices();
        if (voices.length) resolve(voices);
        else speechSynthesis.onvoiceschanged = () => resolve(speechSynthesis.getVoices());
      });
    }

    async function playIntro() {
      if (hasPlayed) return;
      hasPlayed = true;

      const voices = await getVoices();
      const preferred = ["Microsoft Aria", "Microsoft Zira", "Microsoft Guy", "Microsoft Jenny"];
      const selectedVoice = voices.find(v => preferred.some(name => v.name.includes(name))) || voices[0];
      if (!selectedVoice) return;

      introChunks.forEach((lineText) => {
        const utter = new SpeechSynthesisUtterance(lineText);

        // Emphasize key phrases
        const matched = emphasizePhrases.some(phrase => lineText.includes(phrase));
        if (matched) {
          utter.pitch = 1.3;
          utter.rate = 1.25;
          utter.volume = 1.1;
        } else {
          utter.pitch = 1.1 + Math.random() * 0.05;
          utter.rate = 1.15 + Math.random() * 0.05;
          utter.volume = 1;
        }

        utter.voice = selectedVoice;
        utter.lang = "en-US";

        speechSynthesis.speak(utter);
      });
    }

    // Trigger TTS when user clicks on the invisible button
    document.getElementById("invisible-btn").addEventListener("click", playIntro);
    </script>

</body>
</html>

